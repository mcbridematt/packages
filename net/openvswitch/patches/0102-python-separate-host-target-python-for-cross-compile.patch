From e451d74788c73e8679e6a2268185a08901ac7f8c Mon Sep 17 00:00:00 2001
From: Yousong Zhou <zhouyousong@yunionyun.com>
Date: Tue, 21 Aug 2018 12:21:05 +0000
Subject: [PATCH 102/107] python: separate host/target python for cross-compile

At the moment, python-six is a requirement for openvswitch python
library on target machine.

Signed-off-by: Yousong Zhou <yszhou4tech@gmail.com>
---
 Makefile.am       | 2 +-
 m4/openvswitch.m4 | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

Index: openvswitch-2.09.0-nxp/Makefile.am
===================================================================
--- openvswitch-2.09.0-nxp.orig/Makefile.am
+++ openvswitch-2.09.0-nxp/Makefile.am
@@ -60,7 +60,7 @@ endif
 # foo/__init__.pyc will cause Python to ignore foo.py.
 run_python = \
 	PYTHONPATH=$(top_srcdir)/python$(psep)$$PYTHONPATH \
-	PYTHONDONTWRITEBYTECODE=yes $(PYTHON)
+	PYTHONDONTWRITEBYTECODE=yes $(PYTHON_HOST)
 
 ALL_LOCAL =
 BUILT_SOURCES =
Index: openvswitch-2.09.0-nxp/m4/openvswitch.m4
===================================================================
--- openvswitch-2.09.0-nxp.orig/m4/openvswitch.m4
+++ openvswitch-2.09.0-nxp/m4/openvswitch.m4
@@ -353,10 +353,12 @@ else:
    fi
    AM_MISSING_PROG([PYTHON], [python])
    PYTHON=$ovs_cv_python
+   PYTHON_HOST=$ovs_cv_python_host
 
    # HAVE_PYTHON is always true.  (Python has not always been a build
    # requirement, so this variable is now obsolete.)
    AC_SUBST([HAVE_PYTHON])
+   AM_MISSING_PROG([PYTHON_HOST], [python])
    HAVE_PYTHON=yes
    AM_CONDITIONAL([HAVE_PYTHON], [test "$HAVE_PYTHON" = yes])
 
